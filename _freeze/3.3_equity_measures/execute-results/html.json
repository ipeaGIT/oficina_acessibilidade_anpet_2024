{
  "hash": "b99a15dfc2a5dda0fd4d89391543f213",
  "result": {
    "engine": "knitr",
    "markdown": "---\nfrom: markdown+emoji\ncode-annotations: hover\n---\n\n\n\n\n\n# Medidas de equidade\n\nUma questão central na pesquisa e prática em transporte envolve avaliar como os benefícios de acessibilidade dos sistemas e projetos de transporte são distribuídos entre diferentes grupos socioeconômicos e demográficos. As preocupações com a equidade no transporte estão fundamentalmente relacionadas a dois tipos de questões: (1) desigualdade de acessibilidade e (2) pobreza de acessibilidade. **Nesta seção, você aprenderá a usar o pacote `{accessibility}` para calcular diferentes indicadores de desigualdade e pobreza de acessibilidade.**\n<img align=\"right\" src=\"/images/accessibility_logo.png?raw=true\" alt=\"logo\" width=\"140\">\n\nEm um artigo recente, discutimos as vantagens e desvantagens de várias métricas de desigualdade e pobreza mais comumente usadas na literatura de transporte [@karner2024advances] - PDF aberto [aqui](https://www.urbandemographics.org/publication/2024_transp_measuring_transportation_equity/). Os slides abaixo fornecem um *resumo muito breve* de algumas ideias discutidas no artigo, apenas o suficiente para acompanhar esta seção do workshop. No entanto, recomendo fortemente a leitura completa do artigo.\n\n \n<!-- Slides -->\n<p><embed src=\"slides/3.3_equity_metrics.pdf\" style=\"width:100.0%;height:100vh;\" /></p>\n\nNesta seção, usaremos alguns conjuntos de dados de exemplo para a cidade de Belo Horizonte (Brasil), que acompanham o pacote `{accessibility}`. No bloco de código abaixo, lemos a matriz de tempo de viagem e os dados de uso do solo e calculamos o número médio de empregos acessíveis em 30 minutos por transporte público.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(accessibility)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# path to data\ndata_dir <- system.file(\"extdata\", package = \"accessibility\")\n\n# read travel matrix and land use data\nttm <- readRDS(file.path(data_dir, \"travel_matrix.rds\"))\nlud <- readRDS(file.path(data_dir, \"land_use_data.rds\"))\n\n# calculate threshold-based cumulative access\naccess_df <- cumulative_cutoff(\n  travel_matrix = ttm,\n  land_use_data = lud,\n  opportunity = \"jobs\",\n  travel_cost = \"travel_time\",\n  cutoff = 30\n  )\n\nhead(access_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                id  jobs\n            <char> <int>\n1: 89a881a5a2bffff 14561\n2: 89a881a5a2fffff 29452\n3: 89a881a5a67ffff 16647\n4: 89a881a5a6bffff 10700\n5: 89a881a5a6fffff  6669\n6: 89a881a5b03ffff 37029\n```\n\n\n:::\n:::\n\n\n\n\n:mag_right: Hora de uma inspeção visual rápida! Podemos unir nossos resultados de acessibilidade com os dados de uso do solo/população e visualizar como a acessibilidade ao emprego é distribuída entre diferentes grupos de renda.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# merge acces and land use data\ndf <- access_df |>\n      rename(jobs_access = jobs) |>\n      left_join(lud, by='id')\n\n# remove spatial units with no population\ndf <- filter(df, population > 0)\n\n# box plot\nggplot(data = df) +\n  geom_boxplot(show.legend = FALSE,\n               aes(x = income_decile, \n                   y = jobs_access / 1000, \n                   weight = population, \n                   color = income_decile)) +\n  scale_colour_brewer(palette = 'RdBu') + \n  labs(subtitle = 'Número de empregos acessíveis em 30 minutos por transporte público',\n       x = 'Decis de renda', y = 'Empregos (em milhares)') +\n  scale_x_discrete(labels = c(\"D1\\npobres\", \n                              paste0(\"D\", 2:9), \n                              \"D10\\nricos\")) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Computation failed in `stat_boxplot()`.\nCaused by error in `loadNamespace()`:\n! there is no package called 'quantreg'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](3.3_equity_measures_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\nO box plot mostra uma distribuição muito desigual de acesso a oportunidades de emprego. Agora vamos ver o que podemos aprender sobre desigualdade e pobreza de acessibilidade nesta região com alguns indicadores\n\n::: {.callout-tip appearance=\"simple\"}\nUma explicação detalhada de todas as medidas de desigualdade e pobreza abordadas no `{accessibility}` está disponível na [documentação do pacote](https://ipeagit.github.io/accessibility/articles/inequality_and_poverty.html).\n:::\n\n# Medidas de desigualdade\n\n## Razão de Palma\n\nA razão de Palma é calculada como a acessibilidade média dos 10% mais ricos dividida pela acessibilidade média dos 40% mais pobres. Valores do Índice de Palma maiores que 1 indicam que a população mais rica tem níveis de acessibilidade mais altos do que a população mais pobre, enquanto valores menores que 1 indicam a situação oposta.\n\nNo exemplo aqui, vemos que a população mais rica pode acessar, em média, 3,8 vezes mais empregos do que a população pobre.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npalma <- palma_ratio(\n  accessibility_data = access_df,\n  sociodemographic_data = lud,\n  opportunity = \"jobs\",\n  population = \"population\",\n  income = \"income_per_capita\"\n  )\n\npalma\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   palma_ratio\n         <num>\n1:    3.800465\n```\n\n\n:::\n:::\n\n\n\n\n## ~~Índice de Gini~~\n\nProvavelmente, você não deveria estar usando o índice de Gini para medir desigualdade de acessibilidade ;) [veja @karner2024advances].\n\n## Índice de concentração\n\nO índice de concentração (CI) estima a extensão em que as desigualdades de acessibilidade estão sistematicamente associadas aos níveis socioeconômicos dos indivíduos. Os valores do CI podem variar teoricamente entre -1 e 1 (quando toda a acessibilidade está concentrada na pessoa mais ou menos favorecida, respectivamente). Valores negativos indicam que as desigualdades favorecem os pobres, enquanto valores positivos indicam um viés pró-rico.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nci <- accessibility::concentration_index(\n  accessibility_data = access_df,\n  sociodemographic_data = lud,\n  opportunity = \"jobs\",\n  population = \"population\",\n  income = \"income_per_capita\",\n  type = \"corrected\"\n  )\n\nci\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   concentration_index\n                 <num>\n1:           0.3346494\n```\n\n\n:::\n:::\n\n\n\n\n# Medidas de pobreza\n\n## Medidas de pobreza Foster-Greer-Thorbecke (FGT) \n\nA função `fgt_poverty()` calcula as métricas FGT, uma família de medidas de pobreza originalmente proposta por @foster1984class, e que pode ser usada para captar a extensão e a gravidade da pobreza de uma distribuição de acessibilidade. A família FGT é composta por três medidas:\n\n- FGT0: captura a extensão da pobreza como uma simples contagem - ou seja, a proporção de pessoas abaixo da linha de pobreza;\n- FGT1: também conhecido como \"índice de gap de pobreza\", captura a gravidade da pobreza como a distância percentual média entre a linha de pobreza e a acessibilidade dos indivíduos abaixo dessa linha;\n- FGT2: simultaneamente capta a extensão e a gravidade da pobreza, calculando o número de pessoas abaixo da linha de pobreza ponderado pelo tamanho do déficit de acessibilidade em relação à linha de pobreza.\n\nEssa função inclui um parâmetro adicional `poverty_line`, usado para definir a linha de pobreza abaixo da qual os indivíduos são considerados em situação de pobreza de acessibilidade. Para o propósito deste exercício, consideraremos o percentil mais baixo de 25% de acesso como nossa linha de pobreza, que neste exemplo é aproximadamente 23 mil empregos.\n\n::: {.callout-important appearance=\"simple\"}\nLembrete rápido de que a definição de uma linha de pobreza de acessibilidade é, em última análise, uma decisão moral e política e não simplesmente uma questão empírica ou técnica [@pereira2017distributive; @lucas2019measuring].\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get the 25th percentile of access\nquant25 <- quantile(access_df$jobs, .25)\n\npoverty <- fgt_poverty(\n  accessibility_data =  access_df,\n  sociodemographic_data = lud,\n  opportunity = \"jobs\",\n  population = \"population\",\n  poverty_line = quant25\n  )\n\npoverty\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n        FGT0       FGT1       FGT2\n       <num>      <num>      <num>\n1: 0.1478675 0.04948043 0.02862334\n```\n\n\n:::\n:::\n\n\n\n\nInterpretação rápida:\n\n- FGT0: 14,8% da população está em situação de pobreza de acessibilidade\n- FGT1: a acessibilidade daqueles em situação de pobreza de acessibilidade é, em média, 5% menor que a linha de pobreza\n- FGT2: não possui uma interpretação direta, mas pode-se dizer que o nível/intensidade geral de pobreza é de 2,8%.\n\n",
    "supporting": [
      "3.3_equity_measures_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}